\telecommand{Erase Flash}

\tccategory{PD}

\subsection{General description}
\texttt{EraseFlash} telecommand can be used to clear \obc flash memory located on PLD board. The procedure is implemented using an experiment loop scheme. After correct reception of the telecommand, correlating \texttt{EraseFlashFrame} is sent and flash erasing is started immediately. Once finished, another correlated response frame is sent - \texttt{OperationSuccessFrame} or \texttt{OperationErrorFrame}.

\paragraph{Known issues} \mbox{} \\
It's necessary to perform a power cycle to get correct file list after Erase Flash telecommand.

\paragraph{Side effects} \mbox{} \\
Whole flash memory is immediately cleared.

\paragraph{Recommendations for operation team} \mbox{} \\
\None

\paragraph{Usage limitations} \mbox{} \\ 
\None

\subsection{Definition}
\TelecommandApid{EraseFlash}
\TelecommandDeclaration{EraseFlash}

Parameters: 

\begin{tcarglist}
    \tcarg{correlation\_id}{8}{Correlation ID}
\end{tcarglist}

\subsection{Responses}
\ResponseApid{EraseFlashFrame}
\paragraph{EraseFlashFrame}
Correlated response frame \texttt{EraseFlashFrame} confirming that \obc accepted telecommand.

\ResponseApid{OperationSuccessFrame}
\paragraph{OperationSuccessFrame}
Correlated response frame \texttt{OperationSuccessFrame} confirming that flash memory is cleared.

\ResponseApid{OperationErrorFrame}
\paragraph{OperationErrorFrame}
Correlated response frame \texttt{OperationErrorFrame} indicating some problem during flash memory erasing.


\begin{tabular}{r | l}
    Error code & Value \\
    \hline
    \texttt{0x00}   & TBD \\
    \texttt{0x01}   & TBD \\
                    & Invalid argument \\
    any other & File removal error code \\
\end{tabular}


\subsection{Example usage}
Send the telecommand with correlation id set to 11.

\exampleCall{EraseFlash(11)}
